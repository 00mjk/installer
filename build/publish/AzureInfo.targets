<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Target Name="SetAzureProps"
          Condition=" '$(IsOrchestratedPublish)' == 'True' And '$(PB_PublishBlobFeedUrl)' != '' ">

    <ParseFeedUrl FeedUrl="$(PB_PublishBlobFeedUrl)">
      <Output TaskParameter="BlobElements" ItemName="BlobElements" />
    </ParseFeedUrl>

    <PropertyGroup>
      <ArtifactContainerName>%(BlobElements.ContainerName)</ArtifactContainerName>
      <ChecksumContainerName>%(BlobElements.ContainerName)</ChecksumContainerName>
      <ArtifactCloudDropAccountName>%(BlobElements.AccountName)</ArtifactCloudDropAccountName>
      <ChecksumCloudDropAccountName>%(BlobElements.AccountName)</ChecksumCloudDropAccountName>
      <PublishBlobFeedUrlBlobPath>%(BlobElements.BaseBlobPath)</PublishBlobFeedUrlBlobPath>
      <BlobStoragePartialRelativePath>$(PublishBlobFeedUrlBlobPath.Replace('/index.json', ''))/assets</BlobStoragePartialRelativePath>
    </PropertyGroup>
  </Target>

</Project>
